<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pazport to English | Slytherin Edition</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=EB+Garamond:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --slytherin-green: #1A472A;
            --slytherin-silver: #AAAAAA;
            --deep-black: #111111;
            --parchment: #F5F5DC;
            --light-parchment: #FFFEF7;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'EB Garamond', serif;
            background-color: var(--deep-black);
            background-image: url('https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&w=1600&q=80');
            background-size: cover;
            background-attachment: fixed;
            background-blend-mode: multiply;
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 30px auto;
            background-color: var(--parchment);
            background-image: radial-gradient(#c9b18a 1px, transparent 1px);
            background-size: 20px 20px;
            border: 12px solid transparent;
            border-image: url('data:image/svg+xml;utf8,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><rect width="100" height="100" fill="none" stroke="%231A472A" stroke-width="8" stroke-dasharray="10,10"/></svg>') 25 stretch;
            box-shadow: 0 20px 50px rgba(0,0,0,0.7);
            border-radius: 8px;
            overflow: hidden;
        }

        .screen { min-height: 75vh; padding: 40px; text-align: center; }
        .hidden { display: none !important; }

        h1, h2, h3 { font-family: 'Cinzel', serif; color: var(--slytherin-green); margin-bottom: 20px; }
        h1 { font-size: 3.5rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }

        input, select, button, .quiz-option { font-family: 'EB Garamond', serif !important; font-size: 1.2rem; }

        .input-group { margin: 25px 0; text-align: left; max-width: 500px; margin-left: auto; margin-right: auto; }
        .input-group label { display: block; font-family: 'Cinzel', serif; margin-bottom: 10px; color: var(--slytherin-green); }
        
        input[type="text"], select {
            width: 100%; padding: 15px; border: 3px solid var(--slytherin-green);
            background: var(--light-parchment); border-radius: 4px;
        }

        .btn {
            display: inline-block; padding: 16px 32px;
            background: linear-gradient(to bottom, var(--slytherin-green), #0d2b1a);
            color: var(--slytherin-silver) !important;
            border: 2px solid var(--slytherin-silver);
            border-radius: 4px; font-family: 'Cinzel', serif !important;
            font-weight: 700; cursor: pointer; text-transform: uppercase;
            box-shadow: 0 6px 0 var(--deep-black); transition: 0.2s;
        }

        .btn:hover { transform: translateY(-3px); box-shadow: 0 8px 0 var(--deep-black); filter: brightness(1.2); }

        .activity-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 25px; margin-top: 40px; }
        .activity-card {
            background: var(--light-parchment); border: 5px solid var(--slytherin-green);
            padding: 30px; border-radius: 8px; cursor: pointer; transition: 0.4s;
            position: relative;
        }
        .activity-card:hover { transform: translateY(-10px); box-shadow: 0 0 20px var(--slytherin-green); }

        .seal { position: absolute; top: 10px; right: 10px; color: var(--slytherin-silver); font-size: 1.5rem; }

        @media (max-width: 600px) {
            h1 { font-size: 2.2rem; }
            .flashcard { width: 95% !important; height: 320px !important; }
            .front h3 { font-size: 1.8rem !important; }
            .back p { font-size: 1.1rem !important; }
            .btn { width: 100%; margin-bottom: 10px; }
        }

        /* FLASHCARDS VISIBILITY FIX */
        .flashcard { width: 450px; height: 300px; margin: 30px auto; perspective: 1000px; cursor: pointer; }
        .flashcard-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
        .flashcard.flipped .flashcard-inner { transform: rotateY(180deg); }
        .front, .back {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            border-radius: 15px; border: 8px solid var(--slytherin-silver); padding: 30px;
        }
        .front { background-color: var(--slytherin-green) !important; }
        .front h3 { 
            color: #CCCCCC !important; 
            font-family: 'Cinzel', serif; 
            font-size: 2.5rem; 
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8); 
        }
        .back { background-color: var(--slytherin-silver) !important; transform: rotateY(180deg); }
        .back p { 
            color: var(--slytherin-green) !important; 
            font-weight: 600; 
            font-size: 1.4rem; 
            line-height: 1.4;
        }
        
        .quiz-option {
            background: var(--light-parchment); border: 3px solid var(--slytherin-green);
            padding: 15px; margin: 10px auto; max-width: 650px; cursor: pointer; border-radius: 8px; text-align: left;
        }
        .correct { background: #d4edda !important; border-color: #28a745 !important; }
        .wrong { background: #f8d7da !important; border-color: #dc3545 !important; }

        .certificate-container { border: 15px double var(--slytherin-green); padding: 50px; background: white; margin-top: 20px; }
    </style>
</head>
<body>

    <div class="container">
        <section id="screen-home" class="screen">
            <i class="fas fa-snake" style="font-size: 4rem; color: var(--slytherin-green);"></i>
            <h1>Pazport to English</h1>
            <p>Enter the portal of ambition. Master the language of the elite.</p>
            <div class="input-group">
                <label>Full Student Name</label>
                <input type="text" id="studentName" placeholder="Type your name...">
            </div>
            <div class="input-group">
                <label>Select Your Unit</label>
                <select id="unitSelect"></select>
            </div>
            <button class="btn" onclick="startPortal()">Enter Common Room</button>
        </section>

        <section id="screen-menu" class="screen hidden">
            <h2 id="welcome-msg">Slytherin Room</h2>
            <div class="activity-grid">
                <div class="activity-card" onclick="startActivity('scrolls')">
                    <div id="seal-scrolls" class="seal hidden"><i class="fas fa-scroll"></i></div>
                    <i class="fas fa-book-open" style="font-size: 3rem; color: var(--slytherin-green);"></i>
                    <h3>Study Scrolls</h3>
                </div>
                <div class="activity-card" onclick="startActivity('quiz')">
                    <div id="seal-quiz" class="seal hidden"><i class="fas fa-vial"></i></div>
                    <i class="fas fa-brain" style="font-size: 3rem; color: var(--slytherin-green);"></i>
                    <h3>Definition Quiz</h3>
                </div>
                <div class="activity-card" onclick="startActivity('chamber')">
                    <div id="seal-chamber" class="seal hidden"><i class="fas fa-magic"></i></div>
                    <i class="fas fa-wand-sparkles" style="font-size: 3rem; color: var(--slytherin-green);"></i>
                    <h3>Sentence Chamber</h3>
                </div>
            </div>
            <button class="btn" onclick="generateCertificate()" style="margin-top: 50px;">Claim Final Report</button>
        </section>

        <section id="screen-activity" class="screen hidden">
            <div style="text-align: left; margin-bottom: 20px;">
                <button class="btn" onclick="showScreen('menu')" style="padding: 10px 20px;">Back</button>
            </div>
            <div id="activity-content"></div>
        </section>

        <section id="screen-certificate" class="screen hidden">
            <div class="certificate-container">
                <i class="fas fa-shield-halved" style="font-size: 3rem; color: var(--slytherin-green);"></i>
                <h1>Mastery Achievement</h1>
                <p>This recognizes that</p>
                <h2 id="cert-name" style="text-decoration: underline; margin: 15px 0;"></h2>
                <p>has conquered the English skills of</p>
                <h3 id="cert-unit" style="margin: 15px 0;"></h3>
                <div id="cert-code" style="border: 2px dashed #333; padding: 10px; margin-top: 20px; font-family: monospace;"></div>
            </div>
            <button class="btn" onclick="window.print()" style="margin-top: 30px;">Download PDF</button>
        </section>
    </div>

    <script>
        const VOCABULARY_DATABASE = {
            "9th - Unit 1 (Part 1)": {
                english: ["Department Store", "Baseball Cap", "Clerk", "Straight", "Upstairs", "Toward"],
                meanings: [
                    "A large shop divided into several parts selling different types of things.",
                    "A soft hat with a stiff part extending over the eyes.",
                    "A person who works in a shop, office, or bank.",
                    "Continuing in one direction without bending or curving.",
                    "Towards or on the highest floor of a house or building.",
                    "In the direction of someone or something."
                ],
                sentences: [
                    { scrambled: "buy / I / clothes / at / the / department store", correct: "I buy clothes at the department store" },
                    { scrambled: "wearing / is / a / red / baseball cap / He", correct: "He is wearing a red baseball cap" },
                    { scrambled: "The / clerk / me / helped / in / the / shop", correct: "The clerk helped me in the shop" },
                    { scrambled: "Go / and / turn / straight / left", correct: "Go straight and turn left" },
                    { scrambled: "The / is / upstairs / bedroom", correct: "The bedroom is upstairs" },
                    { scrambled: "Walk / toward / the / library / slowly", correct: "Walk toward the library slowly" }
                ]
            },
            "9th - Unit 1 (Part 2)": {
                english: ["Glove", "Terrible", "Direction", "Basement", "Food Court", "Restroom"],
                meanings: [
                    "A piece of clothing that covers the hand and fingers.",
                    "Very unpleasant or serious.",
                    "The path that something takes.",
                    "The part of a building that is below the level of the ground.",
                    "An area in a shopping center where there are many small restaurants.",
                    "A room with a toilet in a public building."
                ],
                sentences: [
                    { scrambled: "hands / My / cold / are / wear / I / gloves", correct: "My hands are cold I wear gloves" },
                    { scrambled: "food / The / was / really / terrible", correct: "The food was really terrible" },
                    { scrambled: "Which / is / direction / the / bank / in?", correct: "Which direction is the bank in?" },
                    { scrambled: "stored / boxes / in / the / basement / We", correct: "We stored boxes in the basement" },
                    { scrambled: "Let's / eat / lunch / at / the / food court", correct: "Let's eat lunch at the food court" },
                    { scrambled: "Where / is / public / the / restroom?", correct: "Where is the public restroom?" }
                ]
            },
"10th - Unit 1 (Part 1)": {
                english: ["Happy", "Nervous", "Proud", "Jealous", "Mad", "Sad"],
                meanings: [
                    "Feeling or showing pleasure and satisfaction.",
                    "Feeling worried or anxious about something, like an exam.",
                    "Feeling very pleased about something you have done.",
                    "Unhappy because someone has something you want.",
                    "Feeling very angry.",
                    "Unhappy or feeling a lack of joy."
                ],
                sentences: [
                    { scrambled: "makes / Music / feel / me / happy", correct: "Music makes me feel happy" },
                    { scrambled: "nervous / about / am / I / the / speech", correct: "I am nervous about the speech" },
                    { scrambled: "parents / My / are / proud / of / me", correct: "My parents are proud of me" },
                    { scrambled: "Do / be / not / jealous / her / of", correct: "Do not be jealous of her" },
                    { scrambled: "He / was / mad / the / at / president", correct: "He was mad at the president" },
                    { scrambled: "The / news / bad / made / us / sad", correct: "The bad news made us sad" }
                ]
            },
            "10th - Unit 1 (Part 2)": {
                english: ["Cheer up", "Congratulations", "Way to go", "Calm down", "Take it easy", "Relax"],
                meanings: [
                    "An expression used to make someone feel happier.",
                    "Something you say when someone has done something well.",
                    "An enthusiastic way to say 'well done'.",
                    "To stop feeling angry or excited.",
                    "Used to tell someone to be calm and not worry.",
                    "To become less active and more calm."
                ],
                sentences: [
                    { scrambled: "Please / up / cheer / because / it / is / okay", correct: "Please cheer up because it is okay" },
                    { scrambled: "you / Congratulations / on / your / good / grade", correct: "Congratulations on your good grade" },
                    { scrambled: "Way / to / go / on / the / test", correct: "Way to go on the test" },
                    { scrambled: "You / need / to / down / calm / now", correct: "You need to calm down now" },
                    { scrambled: "Take / it / easy / and / breathe / slowly", correct: "Take it easy and breathe slowly" },
                    { scrambled: "Try / to / and / relax / listen / to / music", correct: "Try to relax and listen to music" }
                ]
            },
            "11th - Unit 1 (Part 1)": {
                english: ["Celebration", "Costumes", "Terrific", "Take part in", "Well-known", "Be filled with"],
                meanings: [
                    "A special social event, such as a party, when you celebrate something.",
                    "Clothes worn by an actor or at a party to look like someone else.",
                    "Very good; wonderful.",
                    "To be involved in an activity with other people.",
                    "Famous or familiar to many people.",
                    "To contain a lot of a specific feeling or thing."
                ],
                sentences: [
                    { scrambled: "birthday / The / was / celebration / fun", correct: "The birthday celebration was fun" },
                    { scrambled: "wore / We / scary / costumes / for / Halloween", correct: "We wore scary costumes for Halloween" },
                    { scrambled: "idea / That / sounds / like / a / terrific", correct: "That sounds like a terrific idea" },
                    { scrambled: "I / want / to / take part in / the / race", correct: "I want to take part in the race" },
                    { scrambled: "is / a / well-known / He / singer", correct: "He is a well-known singer" },
                    { scrambled: "room / The / was / filled with / flowers", correct: "The room was filled with flowers" }
                ]
            },
            "11th - Unit 1 (Part 2)": {
                english: ["Battle", "Festival", "To Book", "Carnival", "Travel Agency", "Tradition"],
                meanings: [
                    "A fight between armed forces.",
                    "A special day or period, usually in honor of a person or event.",
                    "To arrange to have a seat, room, etc. at a particular time.",
                    "A public festival, often with music and dancing in the streets.",
                    "A company that arranges travel and vacations for people.",
                    "A custom or belief that has existed for a long time."
                ],
                sentences: [
                    { scrambled: "place / The / battle / took / at / sea", correct: "The battle took place at sea" },
                    { scrambled: "music / The / lasts / festival / all / weekend", correct: "The music festival lasts all weekend" },
                    { scrambled: "to / I / need / book / a / flight", correct: "I need to book a flight" },
                    { scrambled: "Rio / has / a / famous / carnival / huge", correct: "Rio has a huge famous carnival" },
                    { scrambled: "The / agency / travel / planned / our / trip", correct: "The travel agency planned our trip" },
                    { scrambled: "Family / is / a / dinner / Sunday / tradition", correct: "Sunday family dinner is a tradition" }
                ]
            }
        };

        let state = { name: "", unit: "", completed: { scrolls: false, quiz: false, chamber: false } };
        const unitSelect = document.getElementById('unitSelect');
        Object.keys(VOCABULARY_DATABASE).forEach(u => {
            let op = document.createElement('option'); op.value = u; op.innerText = u; unitSelect.appendChild(op);
        });

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
            document.getElementById('screen-' + id).classList.remove('hidden');
            if(id === 'menu') {
                if(state.completed.scrolls) document.getElementById('seal-scrolls').classList.remove('hidden');
                if(state.completed.quiz) document.getElementById('seal-quiz').classList.remove('hidden');
                if(state.completed.chamber) document.getElementById('seal-chamber').classList.remove('hidden');
            }
        }

        function startPortal() {
            state.name = document.getElementById('studentName').value;
            state.unit = unitSelect.value;
            if(!state.name) return alert("Who are you? State your name.");
            document.getElementById('welcome-msg').innerText = "Ambition achieved, " + state.name;
            showScreen('menu');
        }

        function startActivity(type) {
            showScreen('activity');
            const cont = document.getElementById('activity-content');
            const data = VOCABULARY_DATABASE[state.unit];

            if(type === 'scrolls') {
                let i = 0;
                const render = () => {
                    cont.innerHTML = `
                        <h2>Word Scroll ${i+1} / ${data.english.length}</h2>
                        <div class="flashcard" onclick="this.classList.toggle('flipped')">
                            <div class="flashcard-inner">
                                <div class="front"><h3>${data.english[i]}</h3></div>
                                <div class="back"><p>${data.meanings[i]}</p></div>
                            </div>
                        </div>
                        <button class="btn" id="nextF">${i === data.english.length - 1 ? 'End Study' : 'Next Word'}</button>
                    `;
                    document.getElementById('nextF').onclick = () => { if(i < data.english.length - 1) { i++; render(); } else { state.completed.scrolls = true; showScreen('menu'); } };
                };
                render();
            }

            if(type === 'quiz') {
                let i = 0;
                const renderQ = () => {
                    let word = data.english[i];
                    let correctDef = data.meanings[i];
                    let opts = [...data.meanings].sort(()=>0.5-Math.random()).slice(0,3);
                    if(!opts.includes(correctDef)) opts[0] = correctDef;
                    opts.sort();
                    cont.innerHTML = `<h2>Match the Definition</h2><p style="font-size:1.8rem; margin:20px;">What is <b>${word}</b>?</p><div id="qlist"></div>`;
                    opts.forEach(o => {
                        let dv = document.createElement('div'); dv.className = 'quiz-option'; dv.innerText = o;
                        dv.onclick = () => {
                            if(o === correctDef) { dv.classList.add('correct'); setTimeout(() => { i++; if(i < data.english.length) renderQ(); else { state.completed.quiz = true; showScreen('menu'); } }, 1000); }
                            else { dv.classList.add('wrong'); }
                        };
                        document.getElementById('qlist').appendChild(dv);
                    });
                };
                renderQ();
            }

            if(type === 'chamber') {
                let i = 0;
                const renderC = () => {
                    let sData = data.sentences[i];
                    cont.innerHTML = `
                        <h2>Sentence Chamber</h2>
                        <p style="margin-bottom:20px;">Fix the mixed-up spell:</p>
                        <h3 style="color:var(--slytherin-green); margin:20px 0;">${sData.scrambled}</h3>
                        <input type="text" id="s-in" placeholder="Type sentence here..." style="width:100%; padding:15px; margin-bottom:20px;">
                        <button class="btn" id="s-btn">Cast Spell</button>
                    `;
                    document.getElementById('s-btn').onclick = () => {
                        if(document.getElementById('s-in').value.trim().toLowerCase() === sData.correct.toLowerCase()) {
                            i++; if(i < data.sentences.length) renderC(); else { state.completed.chamber = true; showScreen('menu'); }
                        } else alert("Magic failed. Try again!");
                    };
                };
                renderC();
            }
        }

        function generateCertificate() {
            if(!state.completed.scrolls || !state.completed.quiz || !state.completed.chamber) return alert("Forbidden! Complete all 3 tasks first.");
            document.getElementById('cert-name').innerText = state.name;
            document.getElementById('cert-unit').innerText = state.unit;
            document.getElementById('cert-code').innerText = "PAZ-MASTER-" + Math.random().toString(36).substr(2, 6).toUpperCase();
            showScreen('certificate');
        }
    </script>
</body>
</html>
